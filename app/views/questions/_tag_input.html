<head>
<script src="https://code.jquery.com/ui/1.11.1/jquery-ui.js"></script>
<link rel="stylesheet" href="https://code.jquery.com/ui/1.10.4/themes/flick/jquery-ui.css">
<%= stylesheet_link_tag "jquery-ui-slider-pips" %>
<%= javascript_include_tag "jquery-ui-slider-pips" %>
</head>

<% if @question == nil %>
<% @question = Question.where(slug: params[:id])[0] %>
<% end %>

<script type="text/javascript">
$(document).ready(function() {
  $(".slider").slider({max: 10, min: 1, step: 1}).slider("pips", {rest: "label", step: 1}).slider("float");

  $(".modal-button").click(function(){
    document.getElementById('numeric_value').value = $(".ui-slider-tip")[0].innerHTML;
  });

  $("form").bind("keypress", function (e) {
      if (e.keyCode == 13) {
          return false;
      }
  });

  var checkbox = $('.form-radio');

  if( checkbox.prop("checked") ){
    $('input:radio').filter(':checked').parent().addClass('checked').css("border","1px solid #419BF9").css("color", "#419BF9");
    $('input:radio').filter(':checked').siblings().addClass('checked').css("color", "white");
    $('input:radio').not(':checked').parent().removeClass('checked'); //Remove checked class from all other radios that are not checked
} else {
    checkbox.prop("checked",false);
    checkbox.parent().removeClass('checked'); //remove checked class when clicked twice
};

  $('input[type=radio]').on('change', function() {
    $(this).closest("form").submit();
  });

});
</script>

<% if @answer == nil %>
<% @answer = user_signed_in? ? @question.answers.build(user_id: current_user.id) : @question.answers.build(user_id: cookies[:guest]) %>
<% end %>
<div class="tag-prompt">
  <%= simple_form_for @answer,:url => {:action => "add_tag", :controller => "answers"}, class: "form-inline", role: "form", html: {novalidate: true}, :remote => true do |f| %>
    <div id="otherInput">
      <div id="otherInputBox">
        <%= hidden_field_tag 'question_id', @question.id %>
        <%= f.label "New Tag", class: "new-tag" %>
        <%= f.input(:options_for_collection, label: false,input_html:{ value: nil, placeholder: "Add a tag or tags to concisely share your thoughts...", class: "other-input-text", id:"other"}) %>
        <%= f.submit "", class: "new-tag-submit" %>
      </div>
    </div>
    <br>
    <div class="options">
        <%if !@question.options_array.nil? && (@question.options_array.count <= 7) %>
          <% @multiple_choice = Array.new()
              @question.options_array.each do |value|
                @multiple_choice << [value, value]
            end%>

            <% @multiple_choice.each do |tag|%>
            <label class= "tag_button_collection">
              <%= f.radio_button :value, tag.first, :class=>"form-radio"%>
              <%="#{tag.last}"%>
              <% @tag_count = Answer.where(question_id: @question.id, value: tag.first).count + 1 %>
              <% if @tag_count < 2 %>
                <%= image_tag("grey_heart.png", class:"grey-heart", :onMouseover=> "this.src='/assets/blue_heart.png'",:onMouseout=> "this.src='/assets/grey_heart.png'")%>
              <%else%>
                <%= image_tag("blue_heart.png", class:"blue-heart")%>
              <%end%>
              <span class="tag-count">
                <%= @tag_count %>
              </span>
            </label>
            <%end%>

      <% end %>
    </div>
  <% end %>
</div>
